<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Termius Pro - All in One VPS Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/xterm/3.14.5/xterm.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xterm/3.14.5/xterm.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xterm/3.14.5/addons/fit/fit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ssh2/1.14.0/ssh2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        :root {
            --primary: #00d4aa;
            --secondary: #00997a;
            --success: #00d4aa;
            --danger: #ff6b6b;
            --warning: #ffd93d;
            --dark: #1a1b26;
            --darker: #16161e;
            --terminal-bg: #1a1b26;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: var(--darker);
            color: #ffffff;
            min-height: 100vh;
            overflow: hidden;
        }
        
        .container {
            display: grid;
            grid-template-columns: 300px 1fr;
            height: 100vh;
        }
        
        .sidebar {
            background: var(--dark);
            border-right: 1px solid #2a2b3a;
            padding: 20px;
            overflow-y: auto;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            background: var(--darker);
        }
        
        header {
            padding: 15px 20px;
            background: var(--dark);
            border-bottom: 1px solid #2a2b3a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-size: 1.5rem;
            background: linear-gradient(90deg, var(--primary), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            width: 32px;
            height: 32px;
            background: var(--primary);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card h2 {
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #a9b1d6;
        }
        
        input {
            width: 100%;
            padding: 10px 12px;
            border-radius: 6px;
            border: 1px solid #2a2b3a;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            font-size: 0.9rem;
        }
        
        input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .btn {
            padding: 10px 15px;
            background: var(--primary);
            color: #1a1b26;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-danger {
            background: var(--danger);
        }
        
        .btn-warning {
            background: var(--warning);
            color: #1a1b26;
        }
        
        .btn-sm {
            padding: 6px 10px;
            font-size: 0.8rem;
        }
        
        .btn-full {
            width: 100%;
            justify-content: center;
        }
        
        .server-list {
            margin-top: 10px;
        }
        
        .server-item {
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 3px solid var(--primary);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .server-item:hover {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .server-name {
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .server-details {
            font-size: 0.8rem;
            color: #a9b1d6;
        }
        
        .tab-bar {
            display: flex;
            background: var(--dark);
            border-bottom: 1px solid #2a2b3a;
            padding: 0 10px;
        }
        
        .tab {
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: #a9b1d6;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .terminal-container {
            flex: 1;
            padding: 20px;
            background: var(--terminal-bg);
        }
        
        #terminal {
            height: 100%;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .script-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .script-btn {
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: #ffffff;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        
        .script-btn:hover {
            background: rgba(0, 212, 170, 0.2);
            border-color: var(--primary);
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 8px 20px;
            background: var(--dark);
            border-top: 1px solid #2a2b3a;
            font-size: 0.8rem;
            color: #a9b1d6;
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--danger);
        }
        
        .status-connected {
            background: var(--success);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 16px;
            background: var(--success);
            color: #1a1b26;
            border-radius: 6px;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background: var(--danger);
            color: white;
        }
        
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .action-btn {
            flex: 1;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: #ffffff;
            cursor: pointer;
            text-align: center;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: rgba(0, 212, 170, 0.2);
            border-color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo" style="margin-bottom: 20px;">
                <div class="logo-icon">VPS</div>
                <h1>Terminal Manager</h1>
            </div>
            
            <div class="card">
                <h2>VPS Connection</h2>
                
                <div class="form-group">
                    <label for="serverName">VPS Name</label>
                    <input type="text" id="serverName" placeholder="My VPS Server">
                </div>
                
                <div class="form-group">
                    <label for="vpsIp">VPS IP Address</label>
                    <input type="text" id="vpsIp" placeholder="192.168.1.1">
                </div>
                
                <div class="form-group">
                    <label for="vpsPort">Port</label>
                    <input type="number" id="vpsPort" value="22">
                </div>
                
                <div class="form-group">
                    <label for="vpsUser">Username</label>
                    <input type="text" id="vpsUser" placeholder="root">
                </div>
                
                <div class="form-group">
                    <label for="vpsPass">Password</label>
                    <input type="password" id="vpsPass" placeholder="••••••••">
                </div>
                
                <button id="saveServerBtn" class="btn btn-full">Save Server</button>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button id="connectBtn" class="btn btn-success" style="flex: 1;">Connect</button>
                    <button id="disconnectBtn" class="btn btn-danger" style="flex: 1;" disabled>Disconnect</button>
                </div>
                
                <div class="connection-status" style="margin-top: 15px;">
                    <div class="status-indicator"></div>
                    <span id="connectionStatusText">Not connected</span>
                </div>
            </div>
            
            <div class="card">
                <h2>Quick Actions</h2>
                <div class="quick-actions">
                    <button class="action-btn" id="sudoSuBtn">sudo su</button>
                    <button class="action-btn" id="clearBtn">Clear</button>
                    <button class="action-btn" id="updateBtn">apt update</button>
                </div>
            </div>
            
            <div class="card">
                <h2>Scripts</h2>
                <div class="script-buttons">
                    <div class="script-btn" data-script="sshplus">SSHPLUS</div>
                    <div class="script-btn" data-script="agnudp">AGNUDP</div>
                    <div class="script-btn" data-script="zivpn">ZIVPN</div>
                    <div class="script-btn" data-script="v2ray">V2RAY</div>
                </div>
            </div>
            
            <div class="card">
                <h2>Saved Servers</h2>
                <div class="server-list" id="serverList">
                    <p style="text-align: center; color: #a9b1d6; font-size: 0.9rem;">No servers saved</p>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <header>
                <div>
                    <span id="currentServer">No server connected</span>
                </div>
                <div>
                    <button class="btn btn-sm btn-warning" id="newTabBtn">+ New Tab</button>
                </div>
            </header>
            
            <div class="tab-bar">
                <button class="tab active">Terminal</button>
                <button class="tab">File Manager</button>
                <button class="tab">Settings</button>
            </div>
            
            <div class="terminal-container">
                <div id="terminal"></div>
            </div>
            
            <div class="status-bar">
                <div class="connection-status">
                    <div class="status-indicator"></div>
                    <span>SSH: Not connected</span>
                </div>
                <div>
                    <span id="terminalStatus">Ready</span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification"></div>

    <script>
        class VPSManager {
            constructor() {
                this.term = null;
                this.sshConnection = null;
                this.isConnected = false;
                this.currentServer = null;
                this.savedServers = JSON.parse(localStorage.getItem('savedServers')) || [];
                this.commandHistory = [];
                this.historyIndex = -1;
                this.currentLine = '';
                
                this.initializeTerminal();
                this.initializeEventListeners();
                this.loadSavedServers();
            }
            
            initializeTerminal() {
                this.term = new Terminal({
                    theme: {
                        background: '#1a1b26',
                        foreground: '#c0caf5',
                        cursor: '#c0caf5',
                        selection: '#33467c',
                        black: '#15161e',
                        red: '#f7768e',
                        green: '#9ece6a',
                        yellow: '#e0af68',
                        blue: '#7aa2f7',
                        magenta: '#bb9af7',
                        cyan: '#7dcfff',
                        white: '#a9b1d6',
                        brightBlack: '#414868',
                        brightRed: '#f7768e',
                        brightGreen: '#9ece6a',
                        brightYellow: '#e0af68',
                        brightBlue: '#7aa2f7',
                        brightMagenta: '#bb9af7',
                        brightCyan: '#7dcfff',
                        brightWhite: '#c0caf5'
                    },
                    fontSize: 14,
                    fontFamily: 'Consolas, "Courier New", monospace',
                    cursorBlink: true
                });
                
                this.term.open(document.getElementById('terminal'));
                
                // Fit terminal to container
                setTimeout(() => {
                    this.term.fit();
                }, 100);
                
                // Add welcome message
                this.writeToTerminal('🚀 VPS Terminal Manager - All in One\r\n');
                this.writeToTerminal('📡 Direct SSH Client in Browser\r\n');
                this.writeToTerminal('💡 Type "help" for available commands\r\n\r\n');
                this.writePrompt();
                
                // Handle terminal input
                this.term.onData(data => {
                    this.handleTerminalInput(data);
                });
                
                // Handle terminal resize
                window.addEventListener('resize', () => {
                    this.term.fit();
                });
            }
            
            initializeEventListeners() {
                // Server management
                document.getElementById('saveServerBtn').addEventListener('click', () => this.saveServer());
                document.getElementById('connectBtn').addEventListener('click', () => this.connectToVPS());
                document.getElementById('disconnectBtn').addEventListener('click', () => this.disconnectFromVPS());
                
                // Quick actions
                document.getElementById('sudoSuBtn').addEventListener('click', () => this.sendCommand('sudo su'));
                document.getElementById('clearBtn').addEventListener('click', () => this.clearTerminal());
                document.getElementById('updateBtn').addEventListener('click', () => this.sendCommand('apt update'));
                
                // Script buttons
                document.querySelectorAll('.script-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const script = btn.dataset.script;
                        this.runScript(script);
                    });
                });
                
                // New tab button
                document.getElementById('newTabBtn').addEventListener('click', () => {
                    this.showNotification('New tab feature would open here', 'success');
                });
            }
            
            handleTerminalInput(data) {
                const code = data.charCodeAt(0);
                
                // Handle special keys
                if (code === 13) { // Enter key
                    this.processCommand(this.currentLine);
                    this.currentLine = '';
                } else if (code === 127) { // Backspace key
                    if (this.currentLine.length > 0) {
                        this.currentLine = this.currentLine.slice(0, -1);
                        this.term.write('\b \b');
                    }
                } else if (code === 27) { // Escape sequences (arrows, etc.)
                    // Handle arrow keys for command history
                    if (data === '\u001b[A') { // Up arrow
                        if (this.historyIndex < this.commandHistory.length - 1) {
                            this.historyIndex++;
                            this.currentLine = this.commandHistory[this.historyIndex];
                            this.term.write('\r\x1b[K'); // Clear line
                            this.writePrompt();
                            this.term.write(this.currentLine);
                        }
                    } else if (data === '\u001b[B') { // Down arrow
                        if (this.historyIndex > 0) {
                            this.historyIndex--;
                            this.currentLine = this.commandHistory[this.historyIndex];
                            this.term.write('\r\x1b[K'); // Clear line
                            this.writePrompt();
                            this.term.write(this.currentLine);
                        } else if (this.historyIndex === 0) {
                            this.historyIndex = -1;
                            this.currentLine = '';
                            this.term.write('\r\x1b[K'); // Clear line
                            this.writePrompt();
                        }
                    }
                } else if (code >= 32 && code <= 126) { // Printable characters
                    this.currentLine += data;
                    this.term.write(data);
                }
            }
            
            processCommand(command) {
                if (!command.trim()) {
                    this.writePrompt();
                    return;
                }
                
                // Add to command history
                this.commandHistory.unshift(command);
                this.historyIndex = -1;
                
                // Process the command
                this.term.write('\r\n');
                
                // Handle local commands
                const lowerCmd = command.toLowerCase().trim();
                if (lowerCmd === 'help') {
                    this.showHelp();
                } else if (lowerCmd === 'clear') {
                    this.clearTerminal();
                } else if (lowerCmd.startsWith('connect ')) {
                    this.handleConnectCommand(command);
                } else {
                    // Send to SSH connection if connected
                    if (this.isConnected && this.sshConnection) {
                        this.sendSSHCommand(command);
                    } else {
                        this.writeToTerminal('Not connected to any server. Use "connect IP" or use the connection form.\r\n');
                        this.writePrompt();
                    }
                }
            }
            
            showHelp() {
                this.writeToTerminal('Available Commands:\r\n');
                this.writeToTerminal('  connect IP[:PORT]    - Connect to VPS server\r\n');
                this.writeToTerminal('  help                 - Show this help message\r\n');
                this.writeToTerminal('  clear                - Clear terminal\r\n\r\n');
                this.writeToTerminal('SSH Commands (when connected):\r\n');
                this.writeToTerminal('  sudo su              - Switch to root user\r\n');
                this.writeToTerminal('  apt update           - Update package lists\r\n');
                this.writeToTerminal('  ls, cd, pwd          - File operations\r\n');
                this.writeToTerminal('  whoami               - Show current user\r\n');
                this.writeToTerminal('  exit                 - Exit current session\r\n\r\n');
                this.writePrompt();
            }
            
            handleConnectCommand(command) {
                const parts = command.split(' ');
                if (parts.length < 2) {
                    this.writeToTerminal('Usage: connect IP[:PORT]\r\n');
                    this.writePrompt();
                    return;
                }
                
                const target = parts[1];
                const [ip, port = '22'] = target.split(':');
                
                // Auto-fill the connection form
                document.getElementById('vpsIp').value = ip;
                document.getElementById('vpsPort').value = port;
                document.getElementById('vpsUser').value = 'root';
                
                this.showNotification(`Ready to connect to ${ip}:${port}`, 'success');
                this.writeToTerminal(`Connection details set for ${ip}:${port}\r\n`);
                this.writeToTerminal('Please enter password and click Connect button.\r\n');
                this.writePrompt();
            }
            
            async connectToVPS() {
                const ip = document.getElementById('vpsIp').value;
                const port = parseInt(document.getElementById('vpsPort').value);
                const username = document.getElementById('vpsUser').value;
                const password = document.getElementById('vpsPass').value;
                
                if (!ip || !username) {
                    this.showNotification('Please fill in IP and Username', 'error');
                    return;
                }
                
                this.showNotification(`Connecting to ${ip}...`, 'success');
                this.writeToTerminal(`\r\n🔌 Connecting to ${ip}:${port} as ${username}...\r\n`);
                
                try {
                    // Use WebSSH2 simulation - in real implementation, this would use SSH2 library
                    await this.simulateSSHConnection(ip, port, username, password);
                    
                } catch (error) {
                    this.writeToTerminal(`❌ Connection failed: ${error.message}\r\n`);
                    this.writePrompt();
                    this.showNotification(`Connection failed: ${error.message}`, 'error');
                }
            }
            
            simulateSSHConnection(ip, port, username, password) {
                return new Promise((resolve, reject) => {
                    // Simulate connection process
                    setTimeout(() => {
                        if (password && password.length > 3) { // Basic password validation
                            this.isConnected = true;
                            this.currentServer = { ip, port, username };
                            
                            // Update UI
                            document.getElementById('connectBtn').disabled = true;
                            document.getElementById('disconnectBtn').disabled = false;
                            document.querySelectorAll('.status-indicator').forEach(el => {
                                el.classList.add('status-connected');
                            });
                            document.getElementById('connectionStatusText').textContent = `Connected to ${ip}`;
                            document.querySelector('.status-bar .connection-status span').textContent = `SSH: ${ip}`;
                            document.getElementById('currentServer').textContent = `${username}@${ip}`;
                            
                            this.writeToTerminal(`✅ Connected to ${ip} as ${username}\r\n`);
                            this.writeToTerminal('🐧 Welcome to Ubuntu 20.04.6 LTS (GNU/Linux 5.4.0-135-generic x86_64)\r\n\r\n');
                            
                            // Show system info (simulated)
                            this.writeToTerminal('System information:\r\n');
                            this.writeToTerminal('  System load:  0.0                Processes:           112\r\n');
                            this.writeToTerminal('  Usage of /:   7.1% of 28.89GB   Users logged in:     0\r\n');
                            this.writeToTerminal('  Memory usage: 16%                IPv4 address:        ' + ip + '\r\n');
                            this.writeToTerminal('  Swap usage:   0%\r\n\r\n');
                            
                            this.writeToTerminal('16 updates can be applied immediately.\r\n');
                            this.writeToTerminal('8 of these updates are standard security updates.\r\n\r\n');
                            
                            this.writePrompt(`${username}@${ip}:~$ `);
                            
                            this.showNotification(`✅ Successfully connected to ${ip}`, 'success');
                            resolve();
                        } else {
                            reject(new Error('Authentication failed'));
                        }
                    }, 2000);
                });
            }
            
            sendSSHCommand(command) {
                // Simulate SSH command execution
                this.term.write(`\r\n`);
                
                // Simulate command processing
                setTimeout(() => {
                    this.simulateCommandOutput(command);
                }, 100);
            }
            
            simulateCommandOutput(command) {
                const lowerCmd = command.toLowerCase().trim();
                
                if (lowerCmd === 'sudo su') {
                    this.writeToTerminal('Password: ');
                    // In real implementation, handle password input
                    setTimeout(() => {
                        this.term.write('********\r\n');
                        this.writeToTerminal('Authentication successful.\r\n');
                        this.writeToTerminal('Now you are root user.\r\n');
                        this.writePrompt('root@vps:~# ');
                    }, 500);
                } else if (lowerCmd === 'apt update') {
                    this.simulateAptUpdate();
                } else if (lowerCmd === 'ls') {
                    this.writeToTerminal('bin   dev  home  lib32  libx32  mnt  proc  run   srv  tmp  var\r\n');
                    this.writeToTerminal('boot  etc  lib   lib64  media   opt  root  sbin  sys  usr\r\n');
                    this.writePrompt();
                } else if (lowerCmd === 'pwd') {
                    this.writeToTerminal('/home/' + this.currentServer.username + '\r\n');
                    this.writePrompt();
                } else if (lowerCmd === 'whoami') {
                    this.writeToTerminal(this.currentServer.username + '\r\n');
                    this.writePrompt();
                } else if (lowerCmd.startsWith('cd ')) {
                    this.writeToTerminal('Directory changed\r\n');
                    this.writePrompt();
                } else if (lowerCmd === 'exit') {
                    if (this.currentServer.username === 'root') {
                        this.writeToTerminal('Logout\r\n');
                        this.writePrompt(`${this.currentServer.username}@${this.currentServer.ip}:~$ `);
                    } else {
                        this.disconnectFromVPS();
                    }
                } else {
                    this.writeToTerminal(`${command}: command not found\r\n`);
                    this.writePrompt();
                }
            }
            
            simulateAptUpdate() {
                this.writeToTerminal('Get:1 http://archive.ubuntu.com/ubuntu focal InRelease [265 kB]\r\n');
                this.writeToTerminal('Get:2 http://archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]\r\n');
                this.writeToTerminal('Get:3 http://archive.ubuntu.com/ubuntu focal-backports InRelease [108 kB]\r\n');
                this.writeToTerminal('Get:4 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]\r\n');
                this.writeToTerminal('Fetched 601 kB in 1s (601 kB/s)\r\n');
                this.writeToTerminal('Reading package lists... Done\r\n');
                this.writeToTerminal('Building dependency tree... Done\r\n');
                this.writeToTerminal('Reading state information... Done\r\n');
                this.writeToTerminal('16 packages can be upgraded. Run "apt list --upgradable" to see them.\r\n');
                this.writePrompt();
            }
            
            sendCommand(command) {
                if (!this.isConnected) {
                    this.showNotification('Please connect to a server first', 'error');
                    return;
                }
                
                this.term.write(`\r\n${command}\r\n`);
                this.processCommand(command);
            }
            
            runScript(scriptType) {
                if (!this.isConnected) {
                    this.showNotification('Please connect to a server first', 'error');
                    return;
                }
                
                const scripts = {
                    sshplus: 'apt update -y && apt upgrade -y && wget https://raw.githubusercontent.com/JVPNSHOP/JK-SCRIPTS/refs/heads/main/Plus && chmod 777 Plus && ./Plus',
                    agnudp: 'apt-get remove command-not-found -y && wget https://raw.githubusercontent.com/Juessh/Juevpnscript/main/install_jueudp.sh && chmod +x install_jueudp.sh; ./install_jueudp.sh',
                    zivpn: 'wget -O zi.sh https://raw.githubusercontent.com/JVPNSHOP/Paid-Zivpn-Script/main/zi.sh && sudo chmod +x zi.sh && sudo ./zi.sh',
                    v2ray: 'bash <(curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh)'
                };
                
                const command = scripts[scriptType];
                this.showNotification(`Running ${scriptType.toUpperCase()} script...`, 'success');
                
                // Send the script command to terminal
                this.sendCommand(command);
            }
            
            disconnectFromVPS() {
                if (!this.isConnected) return;
                
                this.writeToTerminal('\r\n🔌 Logging out...\r\n');
                this.writeToTerminal('Connection closed.\r\n\r\n');
                
                this.isConnected = false;
                this.currentServer = null;
                this.sshConnection = null;
                
                // Update UI
                document.getElementById('connectBtn').disabled = false;
                document.getElementById('disconnectBtn').disabled = true;
                document.querySelectorAll('.status-indicator').forEach(el => {
                    el.classList.remove('status-connected');
                });
                document.getElementById('connectionStatusText').textContent = 'Not connected';
                document.querySelector('.status-bar .connection-status span').textContent = 'SSH: Not connected';
                document.getElementById('currentServer').textContent = 'No server connected';
                
                this.writePrompt();
                this.showNotification('Disconnected from server', 'success');
            }
            
            writeToTerminal(text) {
                this.term.write(text);
            }
            
            writePrompt(prompt = 'vps-manager$ ') {
                this.term.write(`\r\n${prompt}`);
                this.currentLine = '';
            }
            
            clearTerminal() {
                this.term.clear();
                this.writePrompt();
            }
            
            saveServer() {
                const server = {
                    id: Date.now().toString(),
                    name: document.getElementById('serverName').value || 'Unnamed Server',
                    ip: document.getElementById('vpsIp').value,
                    port: document.getElementById('vpsPort').value,
                    user: document.getElementById('vpsUser').value,
                    pass: document.getElementById('vpsPass').value,
                    date: new Date().toLocaleString()
                };
                
                if (!server.ip || !server.port || !server.user) {
                    this.showNotification('Please fill in at least IP, Port, and Username', 'error');
                    return;
                }
                
                this.savedServers.push(server);
                localStorage.setItem('savedServers', JSON.stringify(this.savedServers));
                this.loadSavedServers();
                
                // Clear form
                document.getElementById('serverName').value = '';
                document.getElementById('vpsIp').value = '';
                document.getElementById('vpsPort').value = '22';
                document.getElementById('vpsUser').value = '';
                document.getElementById('vpsPass').value = '';
                
                this.showNotification('Server saved successfully!', 'success');
            }
            
            loadSavedServers() {
                const serverList = document.getElementById('serverList');
                
                if (this.savedServers.length === 0) {
                    serverList.innerHTML = '<p style="text-align: center; color: #a9b1d6; font-size: 0.9rem;">No servers saved</p>';
                    return;
                }
                
                serverList.innerHTML = '';
                
                this.savedServers.forEach(server => {
                    const serverItem = document.createElement('div');
                    serverItem.className = 'server-item';
                    serverItem.innerHTML = `
                        <div class="server-name">${server.name}</div>
                        <div class="server-details">${server.ip}:${server.port} (${server.user})</div>
                    `;
                    serverItem.addEventListener('click', () => {
                        this.loadServer(server);
                    });
                    serverList.appendChild(serverItem);
                });
            }
            
            loadServer(server) {
                document.getElementById('serverName').value = server.name;
                document.getElementById('vpsIp').value = server.ip;
                document.getElementById('vpsPort').value = server.port;
                document.getElementById('vpsUser').value = server.user;
                document.getElementById('vpsPass').value = server.pass;
                
                this.showNotification(`Loaded server: ${server.name}`, 'success');
            }
            
            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.className = `notification ${type === 'error' ? 'error' : ''}`;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            window.vpsManager = new VPSManager();
        });
    </script>
</body>
</html>
